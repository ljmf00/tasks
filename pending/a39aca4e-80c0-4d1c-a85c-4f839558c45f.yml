summary: Compare hash algorithm performance
notes: |
  # Implementations

  ## murmur2 tweaked

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.525       0.038       1.492       1.515       1.703
  user        2.126       0.029       2.076       2.127       2.217
  sys         0.208       0.023       0.153       0.207       0.251

  ==1073225== I   refs:      5,669,445,644
  ==1073225== I1  misses:       13,962,636
  ==1073225== LLi misses:           71,127
  ==1073225== I1  miss rate:          0.25%
  ==1073225== LLi miss rate:          0.00%
  ==1073225==
  ==1073225== D   refs:      2,578,724,585  (1,634,779,038 rd + 943,945,547 wr)
  ==1073225== D1  misses:       39,376,724  (   28,315,800 rd +  11,060,924 wr)
  ==1073225== LLd misses:       20,395,590  (   13,209,858 rd +   7,185,732 wr)
  ==1073225== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1073225== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1073225==
  ==1073225== LL refs:          53,339,360  (   42,278,436 rd +  11,060,924 wr)
  ==1073225== LL misses:        20,466,717  (   13,280,985 rd +   7,185,732 wr)
  ==1073225== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1073225==
  ==1073225== Branches:        786,141,856  (  675,848,901 cond + 110,292,955 ind)
  ==1073225== Mispredicts:      70,327,702  (   54,610,936 cond +  15,716,766 ind)
  ==1073225== Mispred rate:            8.9% (          8.1%     +        14.3%   )
  ```

  ## murmur3

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.589       0.165       1.503       1.536       2.394
  user        2.153       0.052       2.076       2.147       2.346
  sys         0.218       0.030       0.153       0.216       0.300

  ==1123422== I   refs:      5,723,086,596
  ==1123422== I1  misses:       16,414,756
  ==1123422== LLi misses:           70,198
  ==1123422== I1  miss rate:          0.29%
  ==1123422== LLi miss rate:          0.00%
  ==1123422==
  ==1123422== D   refs:      2,578,634,991  (1,634,699,932 rd + 943,935,059 wr)
  ==1123422== D1  misses:       39,209,168  (   28,165,388 rd +  11,043,780 wr)
  ==1123422== LLd misses:       20,392,057  (   13,206,551 rd +   7,185,506 wr)
  ==1123422== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1123422== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1123422==
  ==1123422== LL refs:          55,623,924  (   44,580,144 rd +  11,043,780 wr)
  ==1123422== LL misses:        20,462,255  (   13,276,749 rd +   7,185,506 wr)
  ==1123422== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1123422==
  ==1123422== Branches:        787,277,211  (  676,986,118 cond + 110,291,093 ind)
  ==1123422== Mispredicts:      74,710,202  (   54,061,740 cond +  20,648,462 ind)
  ==1123422== Mispred rate:            9.5% (          8.0%     +        18.7%   )
  ```

  ## djb2

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.508       0.013       1.489       1.506       1.549
  user        2.117       0.028       2.061       2.116       2.166
  sys         0.211       0.021       0.160       0.213       0.250

  ==1076584== I   refs:      5,727,182,711
  ==1076584== I1  misses:       16,056,626
  ==1076584== LLi misses:           70,247
  ==1076584== I1  miss rate:          0.28%
  ==1076584== LLi miss rate:          0.00%
  ==1076584==
  ==1076584== D   refs:      2,589,332,039  (1,645,362,117 rd + 943,969,922 wr)
  ==1076584== D1  misses:       39,525,607  (   28,500,189 rd +  11,025,418 wr)
  ==1076584== LLd misses:       20,384,935  (   13,199,368 rd +   7,185,567 wr)
  ==1076584== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1076584== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1076584==
  ==1076584== LL refs:          55,582,233  (   44,556,815 rd +  11,025,418 wr)
  ==1076584== LL misses:        20,455,182  (   13,269,615 rd +   7,185,567 wr)
  ==1076584== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1076584==
  ==1076584== Branches:        791,178,329  (  680,858,677 cond + 110,319,652 ind)
  ==1076584== Mispredicts:      71,869,019  (   54,362,619 cond +  17,506,400 ind)
  ==1076584== Mispred rate:            9.1% (          8.0%     +        15.9%   )
  ```

  ## djb2a

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        6.943       0.223       6.586       6.926       7.520
  user        7.521       0.232       7.161       7.494       8.148
  sys         0.253       0.025       0.186       0.255       0.294

  ==1134310== I   refs:      18,944,088,035
  ==1134310== I1  misses:        13,949,076
  ==1134310== LLi misses:           133,116
  ==1134310== I1  miss rate:           0.07%
  ==1134310== LLi miss rate:           0.00%
  ==1134310==
  ==1134310== D   refs:       6,019,560,468  (5,066,860,551 rd + 952,699,917 wr)
  ==1134310== D1  misses:     1,672,566,764  (1,643,866,478 rd +  28,700,286 wr)
  ==1134310== LLd misses:        22,224,156  (   15,017,240 rd +   7,206,916 wr)
  ==1134310== D1  miss rate:           27.8% (         32.4%   +         3.0%  )
  ==1134310== LLd miss rate:            0.4% (          0.3%   +         0.8%  )
  ==1134310==
  ==1134310== LL refs:        1,686,515,840  (1,657,815,554 rd +  28,700,286 wr)
  ==1134310== LL misses:         22,357,272  (   15,150,356 rd +   7,206,916 wr)
  ==1134310== LL miss rate:             0.1% (          0.1%   +         0.8%  )
  ==1134310==
  ==1134310== Branches:       3,911,960,798  (3,793,006,389 cond + 118,954,409 ind)
  ==1134310== Mispredicts:      230,529,993  (  209,346,292 cond +  21,183,701 ind)
  ==1134310== Mispred rate:             5.9% (          5.5%     +        17.8%   )
  ```

  ## custom + length

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.583       0.142       1.494       1.536       2.248
  user        2.147       0.037       2.091       2.141       2.257
  sys         0.219       0.037       0.170       0.210       0.366

  ==1081515== I   refs:      5,699,486,260
  ==1081515== I1  misses:       14,785,201
  ==1081515== LLi misses:           70,770
  ==1081515== I1  miss rate:          0.26%
  ==1081515== LLi miss rate:          0.00%
  ==1081515==
  ==1081515== D   refs:      2,588,544,200  (1,644,584,438 rd + 943,959,762 wr)
  ==1081515== D1  misses:       40,596,180  (   29,464,019 rd +  11,132,161 wr)
  ==1081515== LLd misses:       20,389,441  (   13,203,172 rd +   7,186,269 wr)
  ==1081515== D1  miss rate:           1.6% (          1.8%   +         1.2%  )
  ==1081515== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1081515==
  ==1081515== LL refs:          55,381,381  (   44,249,220 rd +  11,132,161 wr)
  ==1081515== LL misses:        20,460,211  (   13,273,942 rd +   7,186,269 wr)
  ==1081515== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1081515==
  ==1081515== Branches:        790,470,723  (  680,169,636 cond + 110,301,087 ind)
  ==1081515== Mispredicts:      77,649,650  (   54,892,725 cond +  22,756,925 ind)
  ==1081515== Mispred rate:            9.8% (          8.1%     +        20.6%   )
  ```

  ## custom

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.542       0.045       1.504       1.529       1.728
  user        2.136       0.041       2.059       2.140       2.244
  sys         0.211       0.026       0.172       0.209       0.256

  ==1087593== I   refs:      5,703,589,653
  ==1087593== I1  misses:       14,157,192
  ==1087593== LLi misses:           71,248
  ==1087593== I1  miss rate:          0.25%
  ==1087593== LLi miss rate:          0.00%
  ==1087593==
  ==1087593== D   refs:      2,589,205,952  (1,645,233,282 rd + 943,972,670 wr)
  ==1087593== D1  misses:       39,371,108  (   28,346,588 rd +  11,024,520 wr)
  ==1087593== LLd misses:       20,391,149  (   13,205,994 rd +   7,185,155 wr)
  ==1087593== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1087593== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1087593==
  ==1087593== LL refs:          53,528,300  (   42,503,780 rd +  11,024,520 wr)
  ==1087593== LL misses:        20,462,397  (   13,277,242 rd +   7,185,155 wr)
  ==1087593== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1087593==
  ==1087593== Branches:        791,122,504  (  680,819,694 cond + 110,302,810 ind)
  ==1087593== Mispredicts:      77,690,277  (   54,614,733 cond +  23,075,544 ind)
  ==1087593== Mispred rate:            9.8% (          8.0%     +        20.9%   )
  ```

  ## xxhash32

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.514       0.019       1.479       1.512       1.556
  user        2.133       0.031       2.069       2.139       2.183
  sys         0.204       0.027       0.155       0.206       0.259

  ==1130184== I   refs:      5,726,082,266
  ==1130184== I1  misses:       14,737,850
  ==1130184== LLi misses:           70,569
  ==1130184== I1  miss rate:          0.26%
  ==1130184== LLi miss rate:          0.00%
  ==1130184==
  ==1130184== D   refs:      2,583,140,917  (1,637,033,503 rd + 946,107,414 wr)
  ==1130184== D1  misses:       39,006,059  (   27,975,325 rd +  11,030,734 wr)
  ==1130184== LLd misses:       20,419,381  (   13,233,942 rd +   7,185,439 wr)
  ==1130184== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1130184== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1130184==
  ==1130184== LL refs:          53,743,909  (   42,713,175 rd +  11,030,734 wr)
  ==1130184== LL misses:        20,489,950  (   13,304,511 rd +   7,185,439 wr)
  ==1130184== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1130184==
  ==1130184== Branches:        794,420,158  (  684,117,244 cond + 110,302,914 ind)
  ==1130184== Mispredicts:      71,853,951  (   54,138,113 cond +  17,715,838 ind)
  ==1130184== Mispred rate:            9.0% (          7.9%     +        16.1%   )
  ```

  ## druntime

  ```
  ===> multitime results
  1: -q ./benchmarks/runners/parser/parser
              Mean        Std.Dev.    Min         Median      Max
  real        1.518       0.019       1.486       1.511       1.590
  user        2.127       0.025       2.077       2.132       2.167
  sys         0.210       0.020       0.169       0.212       0.242

  ==1132085== I   refs:      5,708,428,837
  ==1132085== I1  misses:       16,052,880
  ==1132085== LLi misses:           71,122
  ==1132085== I1  miss rate:          0.28%
  ==1132085== LLi miss rate:          0.00%
  ==1132085==
  ==1132085== D   refs:      2,578,609,728  (1,634,667,401 rd + 943,942,327 wr)
  ==1132085== D1  misses:       39,233,303  (   28,204,656 rd +  11,028,647 wr)
  ==1132085== LLd misses:       20,388,556  (   13,203,513 rd +   7,185,043 wr)
  ==1132085== D1  miss rate:           1.5% (          1.7%   +         1.2%  )
  ==1132085== LLd miss rate:           0.8% (          0.8%   +         0.8%  )
  ==1132085==
  ==1132085== LL refs:          55,286,183  (   44,257,536 rd +  11,028,647 wr)
  ==1132085== LL misses:        20,459,678  (   13,274,635 rd +   7,185,043 wr)
  ==1132085== LL miss rate:            0.2% (          0.2%   +         0.8%  )
  ==1132085==
  ==1132085== Branches:        786,031,841  (  675,739,958 cond + 110,291,883 ind)
  ==1132085== Mispredicts:      72,534,788  (   54,456,139 cond +  18,078,649 ind)
  ==1132085== Mispred rate:            9.2% (          8.1%     +        16.4%   )
  ```
tags:
- dmd
- lexer
project: contrib
priority: P2
delegatedto: ""
subtasks: []
dependencies: []
created: 2022-03-20T02:03:47.291274327Z
resolved: 0001-01-01T00:00:00Z
due: 0001-01-01T00:00:00Z
